{"mappings":"oeAAA,IAAAA,EAAAC,EAAA,S,wGCAAD,EAAAC,EAAA,S,8BD0CA,SAASC,EAAeC,GACtB,MAAMC,EAAYD,EAAEE,OAAOC,WAAWA,WACtC,GAA2B,OAAvBF,EAAUG,SACZ,OAEF,MAAMC,EAAOC,EAAAC,WAAWC,MAAMC,MAAK,EAACC,GAAEA,KAASA,GAAMT,EAAUS,MAE/D,EAAAC,EAAAC,WAAUP,G,YA/BZ,EAAAQ,EAAAC,eACA,EAAAC,EAAAC,aAEA,EAAAC,EAAAC,kBAEArB,EAAAsB,KAAKC,YAAYC,iBAAiB,QAAStB,GAC3CF,EAAAsB,KAAKG,KAAKD,iBAAiB,UA4B3B,SAAsBrB,GACpBA,EAAEuB,iBClDF1B,EAAAsB,KAAKK,QAAQC,UAAUC,OAAO,mBDsD9B,MAAMC,EAAQ3B,EAAEE,OAAO0B,SAASD,MAAME,MAEtC,IAAIC,EAAc,GAClBxB,EAAAC,WAAWwB,WAAaJ,EACxB3B,EAAEE,OAAO0B,SAASD,MAAME,MAAQ,GAEhCvB,EAAAC,WACGyB,oBACAC,MAAK,EAACC,KAAEA,MACFA,EAAKC,QAAQC,QAOhBN,EAAcxB,EAAAC,WAAWwB,YACzB,EAAAM,EAAAC,aAAYJ,EAAKC,WAPjB7B,EAAAC,WAAWwB,WAAaD,EACxBjC,EAAAsB,KAAKoB,eAAeC,UAAY,+BAChCC,YAAW,KACT5C,EAAAsB,KAAKoB,eAAeC,UAAY,KAC/B,SAMNE,SAAQ,KCtEX7C,EAAAsB,KAAKK,QAAQC,UAAUkB,IAAI,yBDkB7B9C,EAAAsB,KAAKyB,mBAAmBvB,iBAAiB,QAASwB,EAAAC,mBAClDjD,EAAAsB,KAAKC,YAAYC,iBAAiB,QAAStB,GAG3CO,EAAAC,WAAWwC,aAAad,MAAK,EAACC,KAAEA,MACzB5B,EAAAC,WAAWyC,WACd1C,EAAAC,WAAW0C,eAGb,EAAAZ,EAAAC,aAAYJ,EAAKC,UACjB,EAAAe,EAAAC,kBACA,EAAAC,EAAAC,kBAAiB/C,EAAAC,WAAW+C,KAAMhD,EAAAC,WAAWgD,gBAI/C,EAAAC,EAAAC","sources":["src/index.js","src/js/components/spinner.js"],"sourcesContent":["import { refs } from './js/references/reference.js';\nimport { onTopArrow } from './js/components/lift-up.js';\nimport { fillModal } from './js/components/modal/fillModal.js';\nimport { onSwitch } from './js/components/switch.js';\nimport { onPaginationClick } from './js/pagination/onPaginationClick.js';\nimport { renderFilms } from './js/render/renderFilms.js';\nimport { apiService } from './js/API/api-service.js';\nimport { toggleBackdrop } from './js/components/modal/backdrop.js';\nimport { renderPagination } from './js/pagination/pagination.js';\nimport { spinnerOn } from './js/components/spinner.js';\nimport { spinnerOff } from './js/components/spinner.js';\nimport { onSmoothScroll } from './js/components/smoothScroll.js';\n\nimport { renederSlider } from './js/components/slider.js';\n\nimport Flickity from 'flickity';\nimport 'flickity/dist/flickity.css';\n\nonTopArrow();\nonSwitch();\n\nonSmoothScroll();\n\nrefs.contentList.addEventListener('click', onGetInfoClick);\nrefs.form.addEventListener('submit', onFormSubmit);\nrefs.paginationControls.addEventListener('click', onPaginationClick);\nrefs.contentList.addEventListener('click', onGetInfoClick);\n\n//finction fetch popular films\napiService.fetchFilms().then(({ data }) => {\n  if (!apiService.allGenres) {\n    apiService.fetchGenres();\n  }\n\n  renderFilms(data.results);\n  renederSlider();\n  renderPagination(apiService.page, apiService.totalPages);\n});\n// ----------\n\ntoggleBackdrop();\n\nfunction onGetInfoClick(e) {\n  const filmClick = e.target.parentNode.parentNode;\n  if (filmClick.nodeName !== 'LI') {\n    return;\n  }\n  const film = apiService.films.find(({ id }) => id == filmClick.id);\n\n  fillModal(film);\n}\n\nfunction onFormSubmit(e) {\n  e.preventDefault();\n\n  spinnerOn();\n\n  const query = e.target.elements.query.value;\n\n  let currentName = '';\n  apiService.searchName = query;\n  e.target.elements.query.value = '';\n\n  apiService\n    .fetchImagesByName()\n    .then(({ data }) => {\n      if (!data.results.length) {\n        apiService.searchName = currentName;\n        refs.failureMessage.innerHTML = 'Search result not successful';\n        setTimeout(() => {\n          refs.failureMessage.innerHTML = '';\n        }, 900);\n      } else {\n        currentName = apiService.searchName;\n        renderFilms(data.results);\n      }\n    })\n    .finally(() => {\n      spinnerOff();\n    });\n}\n","import { refs } from '../references/reference.js';\n\nexport function spinnerOn() {\n  refs.spinner.classList.remove('visually-hidden');\n}\n\nexport function spinnerOff() {\n  refs.spinner.classList.add('visually-hidden');\n}\n"],"names":["$g3W78","parcelRequire","$1f0dc3b9307be026$var$onGetInfoClick","e","filmClick","target","parentNode","nodeName","film","$8P1Rs","apiService","films","find","id","$c7dDA","fillModal","$j7Oh7","onTopArrow","$eWl5n","onSwitch","$5yo3f","onSmoothScroll","refs","contentList","addEventListener","form","preventDefault","spinner","classList","remove","query","elements","value","currentName","searchName","fetchImagesByName","then","data","results","length","$iox0Q","renderFilms","failureMessage","innerHTML","setTimeout","finally","add","paginationControls","$1pvbX","onPaginationClick","fetchFilms","allGenres","fetchGenres","$2atFa","renederSlider","$8huCE","renderPagination","page","totalPages","$iYVxn","toggleBackdrop"],"version":3,"file":"index.905bb677.js.map"}